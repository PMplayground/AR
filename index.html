<!DOCTYPE html>
<html>
  <head>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js@3.3.2/aframe/build/aframe-ar.min.js"></script>
    <style>
      body { margin: 0; overflow: hidden; }
      .debug { position: absolute; top: 10px; left: 10px; color: white; background: black; padding: 10px; z-index: 1000; }
    </style>
  </head>
  <body>
    <div class="debug" id="debug">Loading...</div>
    
    <a-scene embedded arjs>
      <a-marker preset="hiro">
        <!-- TEST with a simple colored box first -->
        <a-box 
          id="testBox"
          color="red" 
          position="0 0.5 0" 
          width="0.5" 
          height="0.5" 
          depth="0.5"
          animation="property: rotation; to: 0 360 0; loop: true; dur: 2000"
        ></a-box>
        
        <!-- Then try the image -->
        <a-image
          id="animatedImage"
          src="assets/frame_0001.png"
          width="0.5"
          height="0.5"
          position="0 1.2 0"  <!-- Above the test box -->
          transparent="true"
          visible="true"
        ></a-image>
      </a-marker>
      
      <a-entity camera></a-entity>
    </a-scene>

    <script>
      const debug = document.getElementById('debug');
      const imageEl = document.getElementById('animatedImage');
      let currentFrame = 1;
      const totalFrames = 120;
      
      // Test if marker is detected
      const marker = document.querySelector('a-marker');
      marker.addEventListener('markerFound', () => {
        debug.textContent = 'Marker found!';
      });
      marker.addEventListener('markerLost', () => {
        debug.textContent = 'Marker lost';
      });
      
      // Animation
      setInterval(() => {
        currentFrame = (currentFrame % totalFrames) + 1;
        const frameNum = String(currentFrame).padStart(4, '0');
        imageEl.setAttribute('src', `assets/frame_${frameNum}.png`);
        debug.textContent = `Frame: ${frameNum} | Marker: Found`;
      }, 1000 / 30);
      
      // Check if images load
      imageEl.addEventListener('load', () => {
        console.log('Image loaded successfully');
      });
      imageEl.addEventListener('error', () => {
        debug.textContent = 'ERROR loading image';
      });
    </script>
  </body>
</html>
